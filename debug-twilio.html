<!DOCTYPE html>
<html>
<head>
    <title>Twilio Debug</title>
</head>
<body>
    <h1>Twilio Debug Test</h1>
    <div id="output"></div>
    
    <script>
        // Test if environment variables are loaded
        const accountSid = import.meta.env?.VITE_TWILIO_ACCOUNT_SID;
        const authToken = import.meta.env?.VITE_TWILIO_AUTH_TOKEN;
        
        const output = document.getElementById('output');
        
        output.innerHTML = `
            <h2>Environment Variables Check:</h2>
            <p><strong>Account SID:</strong> ${accountSid ? '✅ Set' : '❌ Not set'}</p>
            <p><strong>Auth Token:</strong> ${authToken ? '✅ Set' : '❌ Not set'}</p>
            <p><strong>Account SID Value:</strong> ${accountSid || 'undefined'}</p>
            <p><strong>Auth Token Value:</strong> ${authToken ? '***' + authToken.slice(-4) : 'undefined'}</p>
        `;
        
        // Test Twilio API call
        if (accountSid && authToken && accountSid !== 'your_account_sid' && authToken !== 'your_auth_token') {
            output.innerHTML += '<h2>Testing Twilio API...</h2>';
            
            fetch('https://api.twilio.com/2010-04-01/Accounts/' + accountSid + '/IncomingPhoneNumbers.json', {
                headers: {
                    'Authorization': 'Basic ' + btoa(accountSid + ':' + authToken),
                },
            })
            .then(response => response.json())
            .then(data => {
                output.innerHTML += `<p><strong>✅ Twilio API Working!</strong> Found ${data.incoming_phone_numbers?.length || 0} existing phone numbers</p>`;
            })
            .catch(error => {
                output.innerHTML += `<p><strong>❌ Twilio API Error:</strong> ${error.message}</p>`;
            });
        } else {
            output.innerHTML += '<h2>❌ Cannot test Twilio API - credentials not properly configured</h2>';
        }
    </script>
</body>
</html>
